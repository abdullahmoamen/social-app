(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{10:function(e,t,a){"use strict";var s=a(1),n=a(0);var r=function(e){return Object(n.jsx)("div",{className:"container py-md-5 "+(e.wide?"":"container--narrow"),children:e.children})};t.a=function(e){return Object(s.useEffect)((function(){document.title="".concat(e.title," | SocialApp "),window.scrollTo(0,0)}),[e.title]),Object(n.jsx)(r,{wide:e.wide,children:e.children})}},12:function(e,t,a){"use strict";var s=a(1),n=Object(s.createContext)();t.a=n},15:function(e,t,a){"use strict";var s=a(1),n=Object(s.createContext)();t.a=n},19:function(e,t,a){"use strict";a(1);var s=a(0);t.a=function(){return Object(s.jsx)("div",{className:"dots-loading",children:Object(s.jsx)("div",{})})}},20:function(e,t,a){"use strict";a(1);var s=a(10),n=a(5),r=a(0);t.a=function(){return Object(r.jsx)(s.a,{title:"not found",children:Object(r.jsxs)("div",{className:"text-center",children:[Object(r.jsx)("h1",{children:"Wh\ud83d\ude36\ud83d\ude36ps Page Not Found EROOR 4\ud83e\udd284 !"}),Object(r.jsxs)("p",{className:"lead text-muted",children:["\xabBack to ",Object(r.jsx)(n.b,{to:"/",children:"Home Page"})]})]})})}},22:function(e,t,a){"use strict";a(1);var s=a(5),n=a(0);t.a=function(e){var t=e.post,a=new Date(t.createdDate),r="".concat(a.getMonth()+1,"/").concat(a.getDate(),"/").concat(a.getFullYear());return Object(n.jsxs)(s.b,{onClick:e.onClick,to:"/post/".concat(t._id),className:"list-group-item list-group-item-action",children:[Object(n.jsx)("img",{className:"avatar-tiny",src:t.author.avatar}),Object(n.jsx)("strong",{children:t.title})," ",""," ",Object(n.jsx)("br",{}),Object(n.jsxs)("span",{className:"text-muted small",children:[!e.noAuthor&&Object(n.jsxs)(n.Fragment,{children:[" -posted by ",t.author.username]})," on ",r]})]})}},64:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var s=a(3),n=a.n(s),r=a(7),c=a(9),o=a(1),l=a.n(o),i=a(21),u=a.n(i),m=a(5),d=a(6),p=a(4),b=a.n(p),j=a(18),f=a(72),h=(a(64),a(15)),x=a(0);var v=function(){var e=Object(o.useContext)(h.a),t=Object(o.useState)(),a=Object(c.a)(t,2),s=a[0],l=a[1],i=Object(o.useState)(),u=Object(c.a)(i,2),m=u[0],d=u[1];function p(){return(p=Object(r.a)(n.a.mark((function t(a){var r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,b.a.post("/login",{username:s,password:m});case 4:(r=t.sent).data?(e({type:"login",data:r.data}),e({type:"flashMessages",value:"Successfully Logged In \u2764\ufe0f"})):(e({type:"flashMessages",template:"danger",value:"Incorrect username OR password.\ud83d\ude44"}),console.log("error!")),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("error");case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}var j=Object(o.useRef)(null);return Object(o.useEffect)((function(){j.current.focus()}),[]),Object(x.jsx)("form",{onSubmit:function(e){return p.apply(this,arguments)},className:"mb-0 pt-2 pt-md-0",children:Object(x.jsxs)("div",{className:"row align-items-center",children:[Object(x.jsx)("div",{className:"col-md mr-0 pr-md-0 mb-3 mb-md-0",children:Object(x.jsx)("input",{ref:j,required:!0,name:"username",onChange:function(e){return l(e.target.value)},className:"form-control form-control-sm input-dark",type:"text",placeholder:"Username...",autoComplete:"username"})}),Object(x.jsx)("div",{className:"col-md mr-0 pr-md-0 mb-3 mb-md-0",children:Object(x.jsx)("input",{required:!0,name:"password",onChange:function(e){return d(e.target.value)},className:"form-control form-control-sm input-dark",type:"password",placeholder:"Password...",autoComplete:"new-password"})}),Object(x.jsx)("div",{className:"col-md-auto",children:Object(x.jsxs)("button",{className:"btn btn-success btn-sm",children:["Sign In ",Object(x.jsx)("i",{className:"fas fa-sign-in-alt"})]})})]})})},g=a(12),O=a(23);var y=function(){var e=Object(o.useContext)(h.a),t=Object(o.useContext)(g.a);return Object(x.jsxs)("div",{className:"flex-row my-3 my-md-0",children:[Object(x.jsx)(m.b,{"data-tip":"Search","data-for":"search",onClick:function(t){t.preventDefault(),e({type:"openSearch"})},to:"/",className:"text-white mr-2 header-search-icon",children:Object(x.jsx)("i",{className:"fas fa-search"})}),Object(x.jsx)(O.a,{id:"search",className:"custom-tooltip"})," ",Object(x.jsxs)("span",{onClick:function(){return e({type:"toggleChat"})},"data-tip":"Chat","data-for":"chat",className:"mr-2 header-chat-icon "+(t.unreadChatCount?"text-danger":"text-white"),children:[Object(x.jsx)("i",{className:"fas fa-comment"}),t.unreadChatCount?Object(x.jsx)("span",{className:"chat-count-badge text-white",children:t.unreadChatCount<10?t.unreadChatCount:"9+"}):""]}),Object(x.jsx)(O.a,{place:"bottom",id:"chat",className:"custom-tooltip"})," ",Object(x.jsx)(m.b,{to:"/profile/".concat(t.user.username),className:"mr-2","data-tip":"My Profile","data-for":"my profile",children:Object(x.jsx)("img",{className:"small-header-avatar",src:t.user.avatar})}),Object(x.jsx)(O.a,{place:"bottom",id:"my profile",className:"custom-tooltip"})," ",Object(x.jsxs)(m.b,{className:"btn btn-sm btn-success mr-2",to:"/create-post",children:[" ","Create Post ",Object(x.jsx)("i",{className:"fas fa-pen"})]}),Object(x.jsxs)(m.b,{to:"/",onClick:function(){e({type:"logout"}),e({type:"flashMessages",template:"primary",value:"You have successfully logged out. \ud83d\udc4d"})},className:"btn btn-sm btn-danger",children:["Sign Out ",Object(x.jsx)("i",{className:"fas fa-sign-out-alt"})]})]})};var w=function(e){var t=Object(o.useContext)(g.a);return Object(x.jsx)("header",{className:"header-bar bg-dark mb-3",children:Object(x.jsxs)("div",{className:"container d-flex flex-column flex-md-row align-items-center p-3",children:[Object(x.jsx)("h4",{className:"my-0 mr-md-auto font-weight-normal",children:Object(x.jsxs)(m.b,{to:"/",className:"text-white",children:["SocialApp   ",Object(x.jsx)("i",{className:"fas fa-users"})]})}),t.loggedIn?Object(x.jsx)(y,{}):Object(x.jsx)(v,{})]})})},k=a(10);var C=function(){var e=Object(o.useContext)(h.a),t=Object(j.b)((function(e,t){switch(t.type){case"usernameImmediately":e.username.value=t.value,e.username.hasErrors=!1,e.username.value.length>30&&(e.username.hasErrors=!0,e.username.message="UserName should not exceed 30 characters \ud83d\ude44"),e.username.value&&!/^([a-zA-Z0-9]+)$/.test(e.username.value)&&(e.username.hasErrors=!0,e.username.message="UserName can only contain numbers and letters \ud83d\ude44.");break;case"usernameAfterDelay":e.username.value.length<=3&&(e.username.hasErrors=!0,e.username.message="Please enter more than 3 characters !"),e.username.hasErrors||t.noRequest||e.username.checkCount++;break;case"usernameUniqueResults":t.value?(e.username.hasErrors=!0,e.username.isUnique=!1,e.username.message="this username is already exist, plz choose a different username"):e.username.isUnique=!0;break;case"emailImmediately":e.email.hasErrors=!1,e.email.value=t.value;break;case"emailUniqueResults":t.value?(e.email.hasErrors=!0,e.email.isUnique=!1,e.email.message="this email is already exist, plz choose a different email"):e.email.isUnique=!0;break;case"emailAfterDelay":/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(e.email.value)||(e.email.hasErrors=!0,e.email.message="You must provide a valid email.\ud83d\ude44"),e.email.hasErrors||t.noRequest||e.email.checkCount++;break;case"passwordImmediately":e.password.value=t.value,e.password.hasErrors=!1,e.password.value.length>50&&(e.password.hasErrors=!0,e.password.message="Password can not exceed 50 characters.");break;case"passwordAfterDelay":e.password.value.length<=10&&(e.password.hasErrors=!0,e.password.message="Password must be more than 10 characters.");break;case"submitForm":e.username.hasErrors||!e.username.isUnique||e.email.hasErrors||!e.email.isUnique||e.password.hasErrors||e.submitCount++}}),{username:{value:"",hasErrors:!1,message:"",isUnique:!1,checkCount:0},email:{value:"",hasErrors:!1,message:"",isUnique:!1,checkCount:0},password:{value:"",hasErrors:!1,message:""},submitCount:0}),a=Object(c.a)(t,2),s=a[0],l=a[1];return Object(o.useEffect)((function(){if(s.username.value){var e=setTimeout((function(){return l({type:"usernameAfterDelay"})}),800);return function(){return clearTimeout(e)}}}),[s.username.value]),Object(o.useEffect)((function(){if(s.email.value){var e=setTimeout((function(){return l({type:"emailAfterDelay"})}),800);return function(){return clearTimeout(e)}}}),[s.email.value]),Object(o.useEffect)((function(){if(s.password.value){var e=setTimeout((function(){return l({type:"passwordAfterDelay"})}),800);return function(){return clearTimeout(e)}}}),[s.password.value]),Object(o.useEffect)((function(){if(s.username.checkCount){var e=function(){var e=Object(r.a)(n.a.mark((function e(){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.post("/doesUsernameExist",{username:s.username.value},{cancelToken:t.token});case 3:a=e.sent,l({type:"usernameUniqueResults",value:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error !");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),t=b.a.CancelToken.source();return e(),function(){return t.cancel()}}}),[s.username.checkCount]),Object(o.useEffect)((function(){if(s.email.checkCount){var e=function(){var e=Object(r.a)(n.a.mark((function e(){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.post("/doesEmailExist",{email:s.email.value},{cancelToken:t.token});case 3:a=e.sent,l({type:"emailUniqueResults",value:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error !");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),t=b.a.CancelToken.source();return e(),function(){return t.cancel()}}}),[s.email.checkCount]),Object(o.useEffect)((function(){if(s.submitCount){var t=function(){var t=Object(r.a)(n.a.mark((function t(){var r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.post("/register",{username:s.username.value,email:s.email.value,password:s.password.value},{cancelToken:a.token});case 3:r=t.sent,e({type:"login",data:r.data}),e({type:"flashMessages",value:"Congrats ".concat(s.username.value," !! Welcome to your new account \ud83d\udc99")}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("error !");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),a=b.a.CancelToken.source();return t(),function(){return a.cancel()}}}),[s.submitCount]),Object(x.jsx)(k.a,{title:"Welcome\ud83d\udc9c",wide:!0,children:Object(x.jsxs)("div",{className:"row align-items-center",children:[Object(x.jsxs)("div",{className:"col-lg-7 py-3 py-md-5",children:[Object(x.jsx)("h1",{className:"display-3",children:"Remember Writing?"}),Object(x.jsx)("p",{className:"lead text-muted",children:"Are you sick of short tweets and impersonal \u201cshared\u201d posts that are reminiscent of the late 90\u2019s email forwards? We believe getting back to actually writing is the key to enjoying the internet again."})]}),Object(x.jsx)("div",{className:"col-lg-5 pl-lg-5 pb-3 py-lg-5",children:Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l({type:"usernameImmediately",value:s.username.value}),l({type:"usernameAfterDelay",value:s.username.value,noRequest:!0}),l({type:"emailImmediately",value:s.email.value}),l({type:"emailAfterDelay",value:s.email.value,noRequest:!0}),l({type:"passwordImmediately",value:s.password.value}),l({type:"passwordAfterDelay",value:s.password.value}),l({type:"submitForm"})},children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"username-register",className:"text-muted mb-1",children:Object(x.jsx)("small",{children:"Username:"})}),Object(x.jsx)("input",{id:"username-register",onChange:function(e){return l({type:"usernameImmediately",value:e.target.value})},name:"username",className:"form-control",type:"text",placeholder:"Pick a username",autoComplete:"on"}),Object(x.jsx)(f.a,{in:s.username.hasErrors,timeout:400,classNames:"liveValidateMessage",unmountOnExit:!0,children:Object(x.jsx)("div",{className:"alert alert-danger small liveValidateMessage",children:s.username.message})})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"email-register",className:"text-muted mb-1",children:Object(x.jsx)("small",{children:"Email:"})}),Object(x.jsx)("input",{id:"email-register",onChange:function(e){return l({type:"emailImmediately",value:e.target.value})},name:"email",className:"form-control",type:"email",placeholder:"you@example.com",autoComplete:"on"}),Object(x.jsx)(f.a,{in:s.email.hasErrors,timeout:400,classNames:"liveValidateMessage",unmountOnExit:!0,children:Object(x.jsx)("div",{className:"alert alert-danger small liveValidateMessage",children:s.email.message})})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"password-register",className:"text-muted mb-1",children:Object(x.jsx)("small",{children:"Password"})}),Object(x.jsx)("input",{id:"password-register",onChange:function(e){return l({type:"passwordImmediately",value:e.target.value})},name:"password",className:"form-control",type:"password",placeholder:"Create a password",autoComplete:"on"}),Object(x.jsx)(f.a,{in:s.password.hasErrors,timeout:500,classNames:"liveValidateMessage",unmountOnExit:!0,children:Object(x.jsx)("div",{className:"alert alert-danger small liveValidateMessage",children:s.password.message})})]}),Object(x.jsx)("button",{type:"submit",className:"py-3 mt-4 btn btn-lg btn-primary btn-block",children:"Sign up"})]})})]})})};var N=function(){return Object(x.jsxs)("footer",{className:"border-top text-center small text-muted py-3",children:[Object(x.jsxs)("p",{children:[Object(x.jsx)(m.b,{to:"/",className:"mx-1",children:"Home"})," ","|"," ",Object(x.jsx)(m.b,{to:"/about-us",className:"mx-1",children:"About Us"})," ","|"," ",Object(x.jsx)(m.b,{to:"/terms",className:"mx-1",children:"Terms"})]}),Object(x.jsxs)("p",{className:"m-0",children:["Copyright \xa9 2021"," ",Object(x.jsxs)(m.b,{to:"/",className:"text-muted",children:["SocialApp.",Object(x.jsx)("i",{className:"fas fa-users"})]}),"All rights reserved.",Object(x.jsxs)("a",{className:"awesome",target:"_blank",href:"https://www.facebook.com/3bdullahmo2men/",children:["Facebook ",Object(x.jsx)("i",{className:"fab fa-facebook"})]}),Object(x.jsxs)("a",{className:"awesome",target:"_blank",href:"https://www.linkedin.com/in/abdullah-moamen-b202701b4/",children:["Linkedin ",Object(x.jsx)("i",{className:"fab fa-linkedin"})]})]})]})};var q=function(){return Object(o.useEffect)((function(){document.title="About Us",window.scrollTo(0,0)}),[]),Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(k.a,{title:"About Us",children:[Object(x.jsx)("h2",{children:"About Us"}),Object(x.jsx)("p",{className:"lead text-muted",children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Corporis dolorum labore quisquam vel id dicta fuga! Ducimus, quo. Dolore commodi aliquid error veritatis consequuntur, excepturi cumque fuga eum incidunt doloremque?"}),Object(x.jsx)("p",{children:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. At qui enim rem totam voluptatum. Aut saepe temporibus, facilis ex a iste expedita minima dolorum dicta doloribus libero aliquid, quae maxime? Lorem ipsum dolor sit amet consectetur adipisicing elit. Fugiat suscipit beatae eum, est soluta ducimus ratione et impedit sapiente, nihil, atque dignissimos adipisci? Totam atque officia quis voluptates sed veniam?"}),Object(x.jsx)("p",{children:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Expedita voluptates quisquam possimus tenetur, dicta enim rerum quis, quaerat id nobis provident quo dolorum sapiente temporibus facere non repellendus consequatur cupiditate!"})]})})};var E=function(){return Object(x.jsxs)(k.a,{title:"Terms",children:[Object(x.jsx)("h2",{children:"Our Terms & Conditions"}),Object(x.jsx)("p",{className:"lead text-muted",children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Corporis dolorum labore quisquam vel id dicta fuga! Ducimus, quo. Dolore commodi aliquid error veritatis consequuntur, excepturi cumque fuga eum incidunt doloremque?"}),Object(x.jsx)("p",{children:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. At qui enim rem totam voluptatum. Aut saepe temporibus, facilis ex a iste expedita minima dolorum dicta doloribus libero aliquid, quae maxime? Lorem ipsum dolor sit amet consectetur adipisicing elit. Fugiat suscipit beatae eum, est soluta ducimus ratione et impedit sapiente, nihil, atque dignissimos adipisci? Totam atque officia quis voluptates sed veniam?"}),Object(x.jsx)("p",{children:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Expedita voluptates quisquam possimus tenetur, dicta enim rerum quis, quaerat id nobis provident quo dolorum sapiente temporibus facere non repellendus consequatur cupiditate!"}),Object(x.jsx)("h3",{children:"Details"}),Object(x.jsx)("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Quae laboriosam distinctio atque sint earum? Temporibus, voluptas aspernatur aliquam nisi sed harum laborum, nemo odio animi officia quisquam. Veniam, natus reprehenderit."})]})},S=a(19),T=a(22);var F=function(){var e=Object(o.useContext)(g.a),t=(Object(o.useContext)(h.a),Object(j.a)({isLoading:!0,feed:[]})),a=Object(c.a)(t,2),s=a[0],l=a[1];return Object(o.useEffect)((function(){var t=b.a.CancelToken.source();function a(){return(a=Object(r.a)(n.a.mark((function a(){var s;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,b.a.post("/getHomeFeed",{token:e.user.token},{cancelToken:t.token});case 3:s=a.sent,l((function(e){e.isLoading=!1,e.feed=s.data})),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("There was a problem.");case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){t.cancel()}}),[]),s.isLoading?Object(x.jsx)(S.a,{}):Object(x.jsxs)(k.a,{title:"Your feed",children:[s.feed.length>0&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h2",{className:"text-center mb-5",children:"the latest posts from the people you follow."}),Object(x.jsx)("div",{className:"list-group",children:s.feed.map((function(e){return Object(x.jsx)(T.a,{post:e},e._id)}))})]}),0==s.feed.length&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("h2",{className:"text-center",children:["Hello ",Object(x.jsxs)("strong",{children:[" ",e.user.username," "]}),", your feed is empty."]}),Object(x.jsx)("p",{className:"lead text-muted text-center",children:"Your feed displays the latest posts from the people you follow. If you don\u2019t have any friends to follow that\u2019s okay; you can use the \u201cSearch\u201d feature in the top menu bar to find content written by people with similar interests and then follow them."})]})]})};var D=function(e){var t=e.msgs;return Object(x.jsx)("div",{className:"floating-alerts",children:t.map((function(e,t){return Object(x.jsx)("div",{className:"alert text-center floating-alert shadow-sm alert-"+(Boolean(e.template)?e.template:"success"),children:e.message},t)}))})};var A=function(){var e=Object(o.useContext)(g.a),t=Object(d.f)().username,a=Object(o.useState)(!0),s=Object(c.a)(a,2),l=s[0],i=s[1],u=Object(o.useState)([]),p=Object(c.a)(u,2),j=p[0],f=p[1];return Object(o.useEffect)((function(){var e=b.a.CancelToken.source();function a(){return(a=Object(r.a)(n.a.mark((function a(){var s;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,b.a.get("/profile/".concat(t,"/posts"),{cancelToken:e.token});case 3:s=a.sent,f(s.data),i(!1),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("There was a problem.");case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){e.cancel()}}),[t]),l?Object(x.jsx)(S.a,{}):Object(x.jsxs)("div",{className:"list-group",children:[j.length>0&&j.map((function(e){return Object(x.jsx)(T.a,{noAuthor:!0,post:e},e._id)})),0==j.length&&e.user.username==t&&Object(x.jsxs)("p",{className:"lead text-muted text-center",children:["You haven\u2019t created any posts yet; ",Object(x.jsx)(m.b,{to:"/create-post",children:"create one now!\u270d\ufe0f"})]}),0==j.length&&e.user.username!=t&&Object(x.jsxs)("p",{className:"lead text-muted text-center",children:[t," hasn\u2019t created any posts yet."]})]})};var R=function(){var e=Object(d.f)(),t=e.username,a=e.action,s=Object(o.useState)(!0),l=Object(c.a)(s,2),i=l[0],u=l[1],p=Object(o.useState)([]),j=Object(c.a)(p,2),f=j[0],h=j[1],v=Object(o.useContext)(g.a);return Object(o.useEffect)((function(){var e=b.a.CancelToken.source();function s(){return(s=Object(r.a)(n.a.mark((function s(){var r;return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,b.a.get("/profile/".concat(t,"/").concat(a),{cancelToken:e.token});case 3:r=s.sent,h(r.data),u(!1),s.next=11;break;case 8:s.prev=8,s.t0=s.catch(0),console.log("There was a problem or the request was cancelled.");case 11:case"end":return s.stop()}}),s,null,[[0,8]])})))).apply(this,arguments)}return function(){s.apply(this,arguments)}(),function(){e.cancel()}}),[t,a]),i?Object(x.jsx)(S.a,{}):Object(x.jsxs)("div",{className:"list-group",children:[v.loggedIn&&f.length>0&&f.map((function(e,t){return Object(x.jsxs)(m.b,{to:"/profile/".concat(e.username),className:"list-group-item list-group-item-action",children:[Object(x.jsx)("img",{className:"avatar-tiny",src:e.avatar}),e.username]},t)})),v.loggedIn&&0==f.length&&"followers"==a&&Object(x.jsx)("div",{className:"text-center alert alert-danger",children:"No followers yet!! \ud83d\ude2a."}),v.loggedIn&&0==f.length&&"following"==a&&Object(x.jsx)("div",{className:"text-center alert alert-danger",children:"No followings yet \ud83d\ude42."}),!v.loggedIn&&Object(x.jsx)("div",{className:"text-center alert alert-danger",children:"Only users with a registered account can see this information \ud83e\udd25."})]})},U=a(20);var I=function(){var e=Object(d.f)().username,t=Object(o.useContext)(g.a),a=Object(j.a)({followActionLoading:!1,startFollowingRequestCount:0,stopFollowingRequestCount:0,profileData:{profileUsername:"...",profileAvatar:"https://gravatar.com/avatar/placeholder?s=128",isFollowing:!1,counts:{postCount:"",followerCount:"",followingCount:""}},notFound:!1}),s=Object(c.a)(a,2),l=s[0],i=s[1];return Object(o.useEffect)((function(){var a=b.a.CancelToken.source();function s(){return(s=Object(r.a)(n.a.mark((function s(){var r;return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,b.a.post("/profile/".concat(e),{token:t.user.token},{cancelToken:a.token});case 3:r=s.sent,i((function(e){r.data?e.profileData=r.data:e.notFound=!0})),s.next=10;break;case 7:s.prev=7,s.t0=s.catch(0),console.log("There was a problem.");case 10:case"end":return s.stop()}}),s,null,[[0,7]])})))).apply(this,arguments)}return function(){s.apply(this,arguments)}(),function(){a.cancel()}}),[e]),Object(o.useEffect)((function(){if(l.startFollowingRequestCount){var e=function(){var e=Object(r.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.post("/addFollow/".concat(l.profileData.profileUsername),{token:t.user.token},{cancelToken:a.token});case 3:e.sent,i((function(e){e.profileData.isFollowing=!0,e.profileData.counts.followerCount++,e.followActionLoading=!1})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("There was a problem.");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();i((function(e){e.followActionLoading=!0}));var a=b.a.CancelToken.source();return e(),function(){a.cancel()}}}),[l.startFollowingRequestCount]),Object(o.useEffect)((function(){if(l.stopFollowingRequestCount){var e=function(){var e=Object(r.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.post("/removeFollow/".concat(l.profileData.profileUsername),{token:t.user.token},{cancelToken:a.token});case 3:e.sent,i((function(e){e.profileData.isFollowing=!1,e.profileData.counts.followerCount--,e.followActionLoading=!1})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("There was a problem.");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();i((function(e){e.followActionLoading=!0}));var a=b.a.CancelToken.source();return e(),function(){a.cancel()}}}),[l.stopFollowingRequestCount]),l.notFound?Object(x.jsx)(k.a,{title:"Profile not found!",children:Object(x.jsx)(U.a,{})}):Object(x.jsxs)(k.a,{title:"Profile Screen",children:[Object(x.jsxs)("h2",{children:[Object(x.jsx)("img",{className:"avatar-small",src:l.profileData.profileAvatar})," ",l.profileData.profileUsername,t.loggedIn&&!l.profileData.isFollowing&&t.user.username!=l.profileData.profileUsername&&"..."!=l.profileData.profileUsername&&Object(x.jsxs)("button",{onClick:function(){i((function(e){e.startFollowingRequestCount++}))},disabled:l.followActionLoading,className:"btn btn-primary btn-sm ml-2",children:["Follow ",Object(x.jsx)("i",{className:"fas fa-user-plus"})]}),t.loggedIn&&l.profileData.isFollowing&&t.user.username!=l.profileData.profileUsername&&"..."!=l.profileData.profileUsername&&Object(x.jsxs)("button",{onClick:function(){i((function(e){e.stopFollowingRequestCount++}))},disabled:l.followActionLoading,className:"btn btn-danger btn-sm ml-2",children:["Un Follow ",Object(x.jsx)("i",{className:"fas fa-user-times"})]})]}),Object(x.jsxs)("div",{className:"profile-nav nav nav-tabs pt-2 mb-4",children:[Object(x.jsxs)(m.c,{exact:!0,to:"/profile/".concat(l.profileData.profileUsername),className:"nav-item nav-link",children:["Posts: ",l.profileData.counts.postCount]}),Object(x.jsxs)(m.c,{to:"/profile/".concat(l.profileData.profileUsername,"/followers"),className:"nav-item nav-link",children:["Followers: ",l.profileData.counts.followerCount]}),Object(x.jsxs)(m.c,{to:"/profile/".concat(l.profileData.profileUsername,"/following"),className:"nav-item nav-link",children:["Following: ",l.profileData.counts.followingCount]})]}),Object(x.jsxs)(d.c,{children:[Object(x.jsx)(d.a,{exact:!0,path:"/profile/:username",children:Object(x.jsx)(A,{})}),Object(x.jsx)(d.a,{path:"/profile/:username/:action",children:Object(x.jsx)(R,{action:"following"})}),Object(x.jsx)(d.a,{path:"/profile/:username/:action",children:Object(x.jsx)(R,{action:"followers"})})]})]})};var L=Object(d.g)((function(e){var t=Object(o.useContext)(g.a),a=Object(o.useContext)(h.a),s={title:{value:"",hasError:!1,message:""},body:{value:"",hasError:!1,message:""},isFetching:!0,isSaving:!1,id:Object(d.f)().id,sendCount:0,notFound:!1},l=Object(j.b)((function(e,t){switch(t.type){case"fetchComplete":e.title.value=t.value.title,e.body.value=t.value.body,e.isFetching=!1;break;case"titleChange":e.title.value=t.value,e.title.hasError=!1;break;case"bodyChange":e.body.value=t.value,e.body.hasError=!1;break;case"submitRequest":e.title.hasError||e.body.hasError||e.sendCount++;break;case"saveRequestStarted":e.isSaving=!0;break;case"saveRequestFinished":e.isSaving=!1;break;case"titleRules":t.value.trim()||(e.title.hasError=!0,e.title.message="You Must Add a Title! \ud83e\udd2b");break;case"bodyRules":t.value.trim()||(e.body.hasError=!0,e.body.message="You Must Add A Body Content ! \ud83e\udd28");break;case"notFound":e.notFound=!0}}),s),i=Object(c.a)(l,2),u=i[0],p=i[1];return Object(o.useEffect)((function(){var s=b.a.CancelToken.source();function c(){return(c=Object(r.a)(n.a.mark((function r(){var c;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,b.a.get("/post/".concat(u.id),{cancelToken:s.token});case 3:(c=n.sent).data?(p({type:"fetchComplete",value:c.data}),t.user.username!=c.data.author.username&&(a({type:"flashMessages",template:"danger",value:"You do not have permission to edit that post.\ud83d\ude12"}),e.history.push("/"))):p({type:"notFound"}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log("error in loading post !");case 10:case"end":return n.stop()}}),r,null,[[0,7]])})))).apply(this,arguments)}return function(){c.apply(this,arguments)}(),function(){s.cancel()}}),[]),Object(o.useEffect)((function(){if(u.sendCount){var e=function(){var e=Object(r.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.post("/post/".concat(u.id,"/edit"),{title:u.title.value,body:u.body.value,token:t.user.token},{cancelToken:s.token});case 3:e.sent,p({type:"saveRequestFinished"}),a({type:"flashMessages",value:"post was updated. \ud83d\ude0e"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error in loading post !");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();p({type:"saveRequestStarted"});var s=b.a.CancelToken.source();return e(),function(){s.cancel()}}}),[u.sendCount]),u.notFound?Object(x.jsx)(k.a,{title:"not found",children:Object(x.jsx)(U.a,{})}):u.isFetching?Object(x.jsx)(k.a,{title:"",children:Object(x.jsx)(S.a,{})}):Object(x.jsxs)(k.a,{title:"Edit post",children:[Object(x.jsx)(m.b,{to:"/post/".concat(u.id),className:"font-weight-bolder",children:" \xabBack To Post"}),Object(x.jsxs)("form",{className:"mt-3",onSubmit:function(e){e.preventDefault(),p({type:"submitRequest"}),p({type:"titleRules",value:u.title.value}),p({type:"bodyRules",value:u.body.value})},children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"post-title",className:"text-muted mb-1",children:Object(x.jsx)("small",{children:"Title"})}),Object(x.jsx)("input",{onBlur:function(e){return p({type:"titleRules",value:e.target.value})},onChange:function(e){return p({type:"titleChange",value:e.target.value})},value:u.title.value,autoFocus:!0,name:"title",id:"post-title",className:"form-control form-control-lg form-control-title",type:"text",placeholder:"",autoComplete:"off"}),u.title.hasError&&Object(x.jsx)("div",{className:"alert alert-danger small liveValidateMessage",children:u.title.message})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"post-body",className:"text-muted mb-1 d-block",children:Object(x.jsx)("small",{children:"Body Content"})}),Object(x.jsx)("textarea",{onBlur:function(e){return p({type:"bodyRules",value:e.target.value})},onChange:function(e){return p({type:"bodyChange",value:e.target.value})},value:u.body.value,name:"body",id:"post-body",className:"body-content tall-textarea form-control",type:"text"}),u.body.hasError&&Object(x.jsx)("div",{className:"alert alert-danger small liveValidateMessage",children:u.body.message})]}),Object(x.jsx)("button",{disabled:u.isSaving,className:"btn btn-primary",children:"Save Updates"})]})]})}));b.a.defaults.baseURL=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).BACKENDURL||"https://backend-social-app1.herokuapp.com";var M=l.a.lazy((function(){return a.e(6).then(a.bind(null,292))})),P=l.a.lazy((function(){return Promise.all([a.e(2),a.e(8)]).then(a.bind(null,293))})),_=l.a.lazy((function(){return a.e(7).then(a.bind(null,294))})),B=l.a.lazy((function(){return Promise.all([a.e(4),a.e(5)]).then(a.bind(null,295))}));function V(){var e={loggedIn:Boolean(localStorage.getItem("token")),flashMessages:[],user:{token:localStorage.getItem("token"),username:localStorage.getItem("username"),avatar:localStorage.getItem("avatar")},isSearchOpen:!1,isChatOpen:!1,unreadChatCount:0};var t=Object(j.b)((function(e,t){switch(t.type){case"login":e.loggedIn=!0,e.user=t.data;break;case"logout":e.loggedIn=!1;break;case"flashMessages":e.flashMessages.push({message:t.value,template:t.template});break;case"openSearch":e.isSearchOpen=!0;break;case"closeSearch":e.isSearchOpen=!1;break;case"toggleChat":e.isChatOpen=!e.isChatOpen;break;case"closeChat":e.isChatOpen=!1;break;case"incrementUnreadChatCount":e.unreadChatCount++;break;case"clearUnreadChatCount":e.unreadChatCount=0}}),e),a=Object(c.a)(t,2),s=a[0],l=a[1];return Object(o.useEffect)((function(){s.loggedIn?(localStorage.setItem("token",s.user.token),localStorage.setItem("username",s.user.username),localStorage.setItem("avatar",s.user.avatar)):(localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("avatar"))}),[s.loggedIn]),Object(o.useEffect)((function(){if(s.loggedIn){var e=function(){var e=Object(r.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.post("/checkToken",{token:s.user.token},{cancelToken:t.token});case 3:e.sent.data||(l({type:"logout"}),l({type:"flashMessages",template:"danger",value:"Your session has expired. Please log in again.\ud83d\udcbb"})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error !");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),t=b.a.CancelToken.source();return e(),function(){return t.cancel()}}}),[]),Object(x.jsx)(g.a.Provider,{value:s,children:Object(x.jsx)(h.a.Provider,{value:l,children:Object(x.jsxs)(m.a,{children:[Object(x.jsx)(D,{msgs:s.flashMessages}),Object(x.jsx)(w,{}),Object(x.jsx)(o.Suspense,{fallback:Object(x.jsx)(S.a,{}),children:Object(x.jsxs)(d.c,{children:[Object(x.jsx)(d.a,{Route:!0,path:"/profile/:username",children:Object(x.jsx)(I,{})}),Object(x.jsx)(d.a,{exact:!0,path:"/",children:s.loggedIn?Object(x.jsx)(F,{}):Object(x.jsx)(C,{})}),Object(x.jsx)(d.a,{path:"/about-us",children:Object(x.jsx)(q,{})}),Object(x.jsx)(d.a,{path:"/create-post",children:Object(x.jsx)(M,{})}),Object(x.jsx)(d.a,{path:"/post/:id/edit",exact:!0,children:Object(x.jsx)(L,{})}),Object(x.jsx)(d.a,{path:"/post/:id",exact:!0,children:Object(x.jsx)(P,{})}),Object(x.jsx)(d.a,{path:"/terms",children:Object(x.jsx)(E,{})}),Object(x.jsx)(d.a,{children:Object(x.jsx)(U.a,{})})]})}),Object(x.jsx)(f.a,{timeout:400,classNames:"search-overlay",in:s.isSearchOpen,unmountOnExit:!0,children:Object(x.jsx)("div",{className:"search-overlay",children:Object(x.jsx)(o.Suspense,{fallback:"",children:Object(x.jsx)(_,{})})})}),Object(x.jsx)(o.Suspense,{fallback:"",children:s.loggedIn&&Object(x.jsx)(B,{})}),Object(x.jsx)(N,{})]})})})}u.a.render(Object(x.jsx)(V,{}),document.querySelector("#app"))}},[[70,1,3]]]);
//# sourceMappingURL=main.bdaad3bc.chunk.js.map