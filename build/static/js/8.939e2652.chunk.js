(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[8],{293:function(e,t,a){"use strict";a.r(t);var c=a(3),s=a.n(c),n=a(7),r=a(9),o=a(1),i=a(10),l=a(6),u=a(5),d=a(4),j=a.n(d),b=a(19),p=a(157),f=a.n(p),h=a(23),x=a(20),O=a(12),m=a(15),v=a(0);t.default=Object(l.g)((function(e){var t=Object(o.useContext)(O.a),a=Object(o.useContext)(m.a),c=Object(o.useState)(!0),d=Object(r.a)(c,2),p=d[0],y=d[1],g=Object(o.useState)(),k=Object(r.a)(g,2),w=k[0],N=k[1],C=Object(l.f)().id;if(Object(o.useEffect)((function(){var e=j.a.CancelToken.source();function t(){return(t=Object(n.a)(s.a.mark((function t(){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.a.get("/post/".concat(C),{cancelToken:e.token});case 3:a=t.sent,N(a.data),y(!1),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("error in loading post !");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e.cancel()}}),[C]),!p&&!w)return Object(v.jsx)(x.a,{});if(p)return Object(v.jsx)(i.a,{title:"",children:Object(v.jsx)(b.a,{})});var D=new Date(w.createdDate),S="".concat(D.getMonth()+1,"/").concat(D.getDate(),"/").concat(D.getFullYear());function E(){return(E=Object(n.a)(s.a.mark((function c(){return s.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!window.confirm("Are you sure you want to delete this post ? \ud83e\udd14")){c.next=12;break}return c.prev=2,c.next=5,j()({url:"/post/".concat(C),data:{token:t.user.token},method:"delete"});case 5:"Success"==c.sent.data&&(a({type:"flashMessages",value:"Post successfully deleted. \ud83d\udc4c"}),e.history.push("/profile/".concat(t.user.username))),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(2),console.log("error !");case 12:case"end":return c.stop()}}),c,null,[[2,9]])})))).apply(this,arguments)}return Object(v.jsxs)(i.a,{title:w.title,children:[Object(v.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(v.jsx)("h2",{children:w.title}),!!t.loggedIn&&t.user.username==w.author.username&&Object(v.jsxs)("span",{className:"pt-2",children:[Object(v.jsx)(u.b,{to:"/post/".concat(C,"/edit"),"data-tip":"Edit","data-for":"edit",className:"text-primary mr-2",children:Object(v.jsx)("i",{className:"fas fa-edit"})}),Object(v.jsx)(h.a,{id:"edit",className:"custom-tooltip"}),Object(v.jsx)(u.b,{to:"/",onClick:function(){return E.apply(this,arguments)},"data-tip":"Delete","data-for":"delete",className:"delete-post-button text-danger",children:Object(v.jsx)("i",{className:"fas fa-trash"})}),Object(v.jsx)(h.a,{id:"delete",className:"custom-tooltip"})]})]}),Object(v.jsxs)("p",{className:"text-muted small mb-4",children:[Object(v.jsx)(u.b,{to:"/profile/".concat(w.author.username),children:Object(v.jsx)("img",{className:"avatar-tiny",src:w.author.avatar})}),"Posted by ",Object(v.jsx)(u.b,{to:"/profile/".concat(w.author.username),children:w.author.username})," on ",S]}),Object(v.jsx)("div",{className:"body-content",children:Object(v.jsx)(f.a,{children:w.body})})]})}))}}]);
//# sourceMappingURL=8.939e2652.chunk.js.map